<div class="flex flexcolumn fforge_characterSheet">
    <div class="flexrow">
        <ui id="image" class="cImage" dui_name="ui_image"></ui>
        <div class="flex flexcolumn cTop">
            <div class="flexrow">
                <div class="cName" dui_edit="info.name">
                    Name
                </div>
                <div class="flexcolumn cLvlXP">
                    <div class = "cLvl flex">Level <span dui_edit="counters.level"></span></div>
                    <div class = "cXP flexrow flex"><input class="line flex"> / <input class="line flex"> XP</div>
                </div>
            </div>
            <div class="flex"></div>
            <div class="flexrow cBio">
                <div>
                    <div>Class</div>
                    <input dui_edit="info.class" class="line">
                </div>
                <div>
                    <div>Race</div>
                    <input dui_edit="info.race" class="line">
                </div>
                <div>
                    <div>Background</div>
                    <input dui_edit="info.back" class="line">
                </div>
                <div>
                    <div>Alignment</div>
                    <input dui_edit="info.alignment" class="line">
                </div>
            </div>

        </div>
    </div>
    <div class="cCounters flexrow flexwrap">
        <div class="cCounter">
                <img src="/content/FiveForge/icons/juggler.svg" class="cCounterIMG"/>
                <div class = "cCounterName">Proficiency</div>
                <div class = "cCounterValue" dui_edit="counters.proficiency"></div>
        </div>
        <div class="cCounter">
                <div class = "cCounterName">Death Saves</div>
                <img src="/content/FiveForge/icons/death-skull.svg" class="cCounterIMG"/>
                <div class = "cCounterValue flexrow">
                    <span class="glyphicon glyphicon-heart flex save_eval{(@counters.svLife >= 1)?1:0}">
                        <click dui_cond="@counters.svLife == 1">
                            <setAttr dui_name="counters.svLife" dui_value="0" />
                        </click>
                        <click dui_cond="@counters.svLife != 1">
                            <setAttr dui_name="counters.svLife" dui_value="1" />
                        </click>
                    </span>
                    <span class="glyphicon glyphicon-heart flex save_eval{(@counters.svLife >= 2)?1:0}">
                        <click dui_cond="@counters.svLife == 2">
                            <setAttr dui_name="counters.svLife" dui_value="0" />
                        </click>
                        <click dui_cond="@counters.svLife != 2">
                            <setAttr dui_name="counters.svLife" dui_value="2" />
                        </click>
                    </span>
                    <span class="glyphicon glyphicon-heart flex save_eval{(@counters.svLife >= 3)?1:0}">
                        <click dui_cond="@counters.svLife == 3">
                            <setAttr dui_name="counters.svLife" dui_value="0" />
                        </click>
                        <click dui_cond="@counters.svLife != 3">
                            <setAttr dui_name="counters.svLife" dui_value="3" />
                        </click>
                    </span>
                </div>
                <div class = "cCounterValue flexrow">
                    <span class="glyphicon glyphicon-remove flex save_eval{(@counters.svDeath >= 1)?1:0}">
                        <click dui_cond="@counters.svDeath == 1">
                            <setAttr dui_name="counters.svDeath" dui_value="0" />
                        </click>
                        <click dui_cond="@counters.svDeath != 1">
                            <setAttr dui_name="counters.svDeath" dui_value="1" />
                        </click>
                    </span>
                    <span class="glyphicon glyphicon-remove flex save_eval{(@counters.svDeath >= 2)?1:0}">
                        <click dui_cond="@counters.svDeath == 2">
                            <setAttr dui_name="counters.svDeath" dui_value="0" />
                        </click>
                        <click dui_cond="@counters.svDeath != 2">
                            <setAttr dui_name="counters.svDeath" dui_value="2" />
                        </click>
                    </span>
                    <span class="glyphicon glyphicon-remove flex save_eval{(@counters.svDeath >= 3)?1:0}">
                        <click dui_cond="@counters.svDeath == 3">
                            <setAttr dui_name="counters.svDeath" dui_value="0" />
                        </click>
                        <click dui_cond="@counters.svDeath != 3">
                            <setAttr dui_name="counters.svDeath" dui_value="3" />
                        </click>
                    </span>
                </div>
        </div>
        <div class="cCounter">
                <img src="/content/FiveForge/icons/dice-twenty-faces-twenty.svg" class="cCounterIMG"/>
                <div class = "cCounterName">Hit Dice</div>
                <div class = "cCounterValue"><span dui_edit="counters.hitDiceAmount"></span> / <span dui_edit="counters.hitDiceAmount" dui_editval="max"></span></div>
                <div class = "cCounterAddition" dui_edit="counters.hitDice">_hitDice</div>
        </div>
        <div class="cCounter">
                <img src="/content/FiveForge/icons/health-normal.svg" class="cCounterIMG"/>
            <div class = "cCounterName">Hit Points</div>
            <div class = "cCounterValue"><span dui_edit="counters.hp"></span> / <span dui_edit="counters.hp" dui_editval="max"></span></div>
            <div class = "cCounterAddition"><span>Temp.</span> <span dui_edit="counters.tempHP">_tempHP</span></div>
        </div>
        <div class="cCounter">
            <img src="/content/FiveForge/icons/leather-armor.svg" class="cCounterIMG"/>

            <div class = "cCounterName">Armor Class</div>
            <div class = "cCounterValue" dui_edit="counters.ac">_AC</div>
            <div class = "cCounterAddition"><span>Base</span> <span dui_edit="counters.baseAC">_BaseAC</span></div>
        </div>
        <div class="cCounter">
                <img src="/content/FiveForge/icons/sprint.svg" class="cCounterIMG"/>
                <div class = "cCounterName">Speed</div>
                <div class = "cCounterValue" dui_edit="counters.speed">Speed</div>
        </div>

        <div class="cCounter">
                <img src="/content/FiveForge/icons/walking-boot.svg" class="cCounterIMG"/>
                
                <div class = "cCounterName">Initiative</div>
                <div class = "cCounterValue" dui_edit="counters.initiative"></div>
        </div>
    </div>
    <div class="flex flexrow">
        <div class="cStats flexcolumn flexwrap cLeftPanel">
            <loop dui_lookup="stats" dui_key="target">

                <div class="cStat">
                    <img class="cStatIMG" src="/content/FiveForge/icons/traverse{%target%.name}.svg">
                    <div class = "cStatName">traverse{%target%.name}</div>
                    <div class = "cStatValue" dui_edit="%target%"></div>
                    <div class = "cStatBonus">
                        <span>Bonus</span> <span dui_cond="traverse{%target%.bonus} >= 0">+</span>traverse{%target%.bonus}
                        <click>
                            <roll dui_roll="d20 + traverse{%target%.bonus}"dui_flavor="traverse{%target%.name} check" />
                        </click>
                    </div>
                    <div class = "cStatSave">
                        <span class="glyphicon glyphicon-ok subtitle" dui_cond="@%target%.saveProf">
                            <click>
                                <setAttr dui_name="%target%" dui_tgtval="saveProf" dui_value="0"></setAttr>
                            </click>
                        </span>
                        <span class="glyphicon glyphicon-remove subtitle" dui_cond="@%target%.saveProf == 0">
                            <click>
                                <setAttr dui_name="%target%" dui_tgtval="saveProf" dui_value="1"></setAttr>
                            </click>
                        </span>
                        <span>
                            <span>Save</span>
                            <span dui_cond="@%target%.save >= 0">+</span>traverse{%target%.save}
                            <click>
                                <roll dui_roll="d20 + traverse{%target%.save}"dui_flavor="traverse{%target%.name} save" />
                            </click>
                        </span>
                    </div>
                </div> 

            </loop>

        </div>
        <div class="secondLeft flexcolumn">
            <div class="cSkills">
                <loop dui_lookup="skills" dui_key="target">
                    <div dui_cond="traverse{%target%.min}!=-1" class="cSkill proficienttraverse{%target%.prof}">
                        <div>
                            traverse{%target%.name} <span dui_cond="@%target%>=0">+</span>traverse{%target%.current}
                            <click>
                                <roll dui_roll="d20 + traverse{%target%.current}" dui_flavor="traverse{%target%.name} check"></roll>
                            </click>
                        </div>
                        <span class="glyphicon glyphicon-ok" dui_cond="@%target%.prof">
                            <click>
                                <setAttr dui_name="%target%" dui_tgtval="prof" dui_value='0'></setAttr>
                            </click>
                        </span>
                        <span class="glyphicon glyphicon-remove" dui_cond="@%target%.prof == 0">
                            <click>
                                <setAttr dui_name="%target%" dui_tgtval="prof" dui_value='1'></setAttr>
                            </click>
                        </span>
                    </div>
                </loop>
            </div>
            <div></div>
            <div class = "cTracker">
                <div class="cTrackerName">Sorcery Points</div>
                <div class="cTrackerValue">1 / 100</div>
            </div>
            <div class = "cTracker" style="overflow-y:auto">
                <div class="cTrackerName">Attack Modifiers</div>
                <ui dui_name="fforge_modifierEdit">
                    <scope dui_name="path" dui_value="attackModifiers"></scope>
                </ui>
            </div>
            <div class = "cTracker" style="overflow-y:auto">
                <div class="cTrackerName">Damage Modifiers</div>
                <ui dui_name="fforge_modifierEdit">
                        <scope dui_name="path" dui_value="damageModifiers"></scope>
                    </ui>
                </div>
        </div>
        <div class="flex flexcolumn rightPanel">
            <div class="cTraits flexcolumn" dui_resizable="s" dui_keepheight="traits">
                    <ui dui_name="fforge_elementList" class="flex cInventory" style="height:500px;overflow-y:auto;" dui_scroll="traits">
                        <scope dui_name="type" dui_value="Trait" />
                    </ui>
            </div>
            <div class="flex2 flex flexcolumn cTabulator">
                <div class="cTabs flex flexcolumn">
                    <div class="cTabButtons">
                        <div class="cTabSelected_eval{@counters.tab == 0}">
                            Inventory
                            <click>
                                <setAttr dui_name="counters.tab" dui_value = "0"></setAttr>
                            </click>
                        </div>
                        <div class="cTabSelected_eval{@counters.tab == 1}">
                            Spells
                            <click>
                                <setAttr dui_name="counters.tab" dui_value = "1"></setAttr>
                            </click>
                        </div>
                        <div class="cTabSelected_eval{@counters.tab == 2}">
                            Biography
                            <click>
                                <setAttr dui_name="counters.tab" dui_value = "2"></setAttr>
                            </click>
                        </div>
                    </div>
                    <div class="cTabContents flex flex flexcolumn">
                        <div class="flex flexcolumn">
                            <div class="tabInventory cTabContent display_eval{@counters.tab == 0}">
                                <ui dui_name="fforge_elementList" class="flex cInventory" style="height:500px;overflow-y:auto;" dui_scroll="items" />
                            </div>
                            <div class="tabSpells cTabContent display_eval{@counters.tab == 1} flexrow_force">
                                <div class="flex">
                                    <ui dui_name="fforge_elementList" class="flex cInventory" style="max-height:95%;margin:10px;overflow-y:auto;" dui_scroll="spells">
                                        <scope dui_name="type" dui_value="Spell" />
                                    </ui>
                                </div>
                                <div class="cSpellTracker flexcolumn">
                                    <loop dui_count="9" dui_start="1" dui_key="lvl">
                                        <div class="cSpellLevel flexrow">
                                            <div style="margin-right:10px;padding-top:2px;">LVL. %lvl%</div>
                                            <div><span class="centerglyph glyphicon glyphicon-menu-down"></span></div>
                                            <div><input style="width:20px" class="line center"/></div>
                                            <div>/</div>
                                            <div><input style="width:20px" class="line center"/></div>
                                        </div>
                                    </loop>
                                </div>
                            </div>
                            <div class="tabBio cTabContent display_eval{@counters.tab == 2}">
                                <ui dui_name="ui_rawNotes" class="cNotes flex flexcolumn">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

</div>
<style>
    .cInventory{
        margin-top:5px;
        padding-right:5px;
        padding-left:5px;
        padding-bottom:5px;
    }
    .centerglyph
    {
        color:red;
        display: inline-block;
        vertical-align: sub;
    }
    .rightPanel
    {
        margin-left:5px;
        margin-top:2px;
    }
    .flexrow_force
    {
        flex-direction:row !important;
    }
    .cSpellTracker
    {
        margin-top:10px;
        width:8em;
    }
    .cInventory > div
    {
        margin-top:2px;
    }
    .cTraits
    {
        border-bottom:1px solid rgba(0,0,0,0.1);
        height:40%;
    }
    .cTabContent{
        display:flex;
        flex-direction:column;
    }
    .secondLeft
    {
        bottom:0;
    }
    .nephritis
    {
        color:#27ae60;
    }
    * {
        flex-shrink:0;
    }
    .cStats
    {
        min-height:690px;
    }
    .cAddElement
    {
        background:white;
        border: 1px solid #333;
        flex:0.01;
    }
    .cCounter
    {
        position:relative;
        overflow:hidden;
    }
    .cCounterIMG
    {
        position: absolute;
        top:0;
        left:0;
        right:0;
        opacity: 0.1;
        height: 115%;
        width: 100%;
        pointer-events:none;
        -webkit-mask-image:linear-gradient(to bottom, rgba(255,255,255,1) 0%,rgba(255,255,255,1) 60%, rgba(0,0,0,0) 100%);
        mask-image:linear-gradient(to bottom, rgba(255,255,255,1) 0%,rgba(255,255,255,1) 60%, rgba(0,0,0,0) 100%);
    }
    .cStatIMG
    {
        -webkit-mask-image: radial-gradient(ellipse at center, #ffffff 0%, rgba(255, 255, 255, 1) 70%, rgba(255, 255, 255, 0) 100%);
        mask-image: radial-gradient(ellipse at center, #ffffff 0%, rgba(255, 255, 255, 1) 70%, rgba(255, 255, 255, 0) 100%);
    }
    .save_1, .save_0:hover
    {
        color: rgb(231, 76, 60);
        text-shadow: 0px 0px 1px rgba(0, 0, 0, 1);
    }
    .save_0
    {
        text-shadow: 0px 0px 1px rgba(0, 0, 0, 0.6);
        color: rgb(251, 136, 120);
    }

    ::-webkit-scrollbar {
        width: 2px;
    }
    ::-webkit-scrollbar-track {
        -webkit-box-shadow: 0 0 6px rgba(0,0,0,0.5); 
        border-radius: 10px;
    }
    ::-webkit-scrollbar-thumb {
        border-radius: 10px;
        -webkit-box-shadow: 0 0 6px rgba(0,0,0,0.5); 
    }
</style>